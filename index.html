<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="icon" href="Images/icon-06.png" type="image/x-icon">
    <title>What is Noise?</title>
</head>
<!-- Nav Bar -->
<body style="background-color: #191919">
<div class="topnav">
    <a class="active" href="index.html">What is Noise?</a>
    <a href="what_is_colour.html">What is Colour?</a>
    <a href="how_they_connect.html">The Connection</a>
    <a href="pick_your_colour.html">Pick Your Colour</a>
</div>

<!-- Banner Section -->
<div class="hero-image"> 
</div>


<!-- Place where button will take the user after clicking -->
<a id="backToTopButton"></a> 


<!-- Waveform interaction Section -->
<!-- This section details how noise is created -->
<section id="sec-1">
    <div class="sec-1Container">
        <div class="noisetext">
            <h1 class="noiseH1">How is Noise Created?</h1>   
            <p>Noise is created when something vibrates and sends invisible waves of energy into our ears. </p>  
                <p> As the waves of energy continue to travel, they create patterns of disturbance.</p>
                 <p> We visualise these vibrational disturbances with waveforms! </p>
        </div>
        
        <!-- Waveform Terminology Section -->
        <!-- This section showcases a chart I created with definitions/explainers that make up a waveform. -->
        <div class="waveformImage">  
            <div class="textContainer">
              <div class="noisetext2">
                <h1 class="noiseH1">Waveform Terminology</h1>
                    Amplitude tells us how much energy the vibrations have with how tall or short the waveform is.</p>
            <p>Wavelength shows us the distance between these vibrations.</p>
              </div>
            </div>
            <img class="waveformChart" src="Images/MyWaveformImg-01.jpg" width="720px" height="356px">
          </div>
          

      

          <script>  // Fade in/fade out controls for Waveform Terminology section :)! This is used with IntersectionObserver 
            document.addEventListener("DOMContentLoaded", () => {
              const waveformImage = document.querySelector(".waveformImage");
          
              const revealWaveformImage = (entries) => {
                entries.forEach(entry => {
                  if (entry.isIntersecting) {
                    waveformImage.classList.add("reveal");
                  } else {
                    waveformImage.classList.remove("reveal");
                  }
                });
              };
          
              const observer = new IntersectionObserver(revealWaveformImage, {
                threshold: 0.5   // when 50% of the section is scrolled to, the section will appear 
              });
          
              observer.observe(waveformImage);
            });
          </script>
        
        <!-- Scroll to top button -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                var btn = $('#backToTopButton');
    
                $(window).scroll(function() {
                    if ($(window).scrollTop() > 600) {   // Appears just after the Waveform Terminology section
                        btn.addClass('show');
                    } else {
                        btn.removeClass('show');   // If the user is above this section, the button will not appear
                    }
                });
    
                btn.on('click', function(e) {
                    e.preventDefault();
                    $('html, body').animate({scrollTop:0}, '600');   // on click, go to top of the page 
                });
            });
        </script>
        
        <!-- Waveform Interaction section  -->
        <div class="noiseimgplaceholder">
            <div class="textContainer">
                <h1 class="noiseH1">Try it Out!</h1>
                <p class="noisetext2"> Press "Start" to begin the interaction. </p>
                    <p class="noisetext2">Drag your mouse up, down, or side to side to hear the difference in waveforms!</p>
                <button class="noiseButton" onclick="playOscillator()">Start Waveform</button> 
                <button class="noiseButton" onclick="stopOscillator()">Stop Waveform</button>
            </div>

            <!-- Calling the p5 canvas to be placed below the buttons -->
            <div id="p5CanvasContainer" class="p5CanvasContainer"></div>  
        </div>

        <!-- Fade in/fade out controls for Waveform Interaction Section! This is used with IntersectionObserver  -->
        <script>
            document.addEventListener("DOMContentLoaded", function () {
              const noiseimgplaceholder = document.querySelector(".noiseimgplaceholder");
          
              function revealNoiseImgPlaceholder(entries, observer) {
                entries.forEach(entry => {
                  if (entry.isIntersecting) {
                    noiseimgplaceholder.classList.add("reveal");
                  }
                  else {
                    noiseimgplaceholder.classList.remove("reveal");
                  }
                });
              }
          
              const observer = new IntersectionObserver(revealNoiseImgPlaceholder, {
                threshold: 0.5 // when 50% of the section is scrolled to, the section will appear 
              });
          
              observer.observe(noiseimgplaceholder);
            });
          </script>
          

<!-- Frequency Information/Interaction Section -->
        <div class="sec-2Container">
            <div class="noisetext2">
                <h1 class="noiseH1">How does Frequency fit in?</h1>
                <p>Frequency tells us the rate of these vibrations there are per second (measured in Hertz).</p>
                <p>As the frequency gets higher, more rapid vibrations occur and result in a higher pitch.
                    The lower the frequency gets, the vibrations slow and result in a lower pitch. </p>
                <p> On average, the human ear can hear a range of frequencies starting from as low as 20 Hertz, to 20,000 Hertz!</p>
            </div>
            <div class="freqeuncyContainer">
                <!-- Calling frequency interaction p5 canvas -->
                <div id="frequencyP5Container" class="frequencyP5Container"></div>
                <div class="noiseButtonContainer">
                    <button class="noiseButton" onclick="startPlayingOscillator()">Start Range</button>
                    <button class="noiseButton" onclick="stopPlayingOscillator()">Stop Range</button>
                </div>
            </div>
        </div>
        <!-- Fade in/fade out controls for frequency information/interaction section This is used with IntersectionObserver  -->
        <script>
            document.addEventListener("DOMContentLoaded", function () {
              const sec2Container = document.querySelector(".sec-2Container");
          
              function revealSec2Container(entries, observer) {
                entries.forEach(entry => {
                  if (entry.isIntersecting) {
                    sec2Container.classList.add("reveal");
                  } else {
                    sec2Container.classList.remove("reveal");
                  }
                });
              }
          
              const observer = new IntersectionObserver(revealSec2Container, {
                threshold: 0.5 // when 50% of the section is scrolled to, the section will appear 
              });
          
              observer.observe(sec2Container);
            });
          </script>
          





    </div>
</section>

<!-- P5.JS sound and complete library -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js" integrity="sha512-uaz5GpnQoE6t5echKlX8P52czvsIGgLPcvlzfvRubLZ1Hp8JemUDnbUiAahbVtPb+jUVrNETuXvAhDDF/N3M4w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/addons/p5.sound.min.js" integrity="sha512-WzkwpdWEMAY/W8WvP9KS2/VI6zkgejR4/KTxTl4qHx0utqeyVE0JY+S1DlMuxDChC7x0oXtk/ESji6a0lP/Tdg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<!-- Waveform Interaction using p5.js sound oscillator -->
<script>
    let osc, fft;
    let playing = false; // set it to not automatically play 


    // Waveform Interaction
    function setup() {
        let canvas = createCanvas(720, 356); // canvas size
        canvas.parent('p5CanvasContainer'); // parent it so it can go anywhere on the page
        osc = new p5.SinOsc(); // set frequency and type
        osc.amp(0.5); // how high the waveform will be 
        fft = new p5.FFT();
    }

    function draw() {
        background(255); // white background
        let waveform = fft.waveform(); // analyze the waveform
        beginShape(); // starting to analyse the waveform from the audio 
        strokeWeight(5); // waveform thickness to 5
        for (let i = 0; i < waveform.length; i++) {
            let x = map(i, 0, waveform.length, 0, width);  // draws the waveform equal to the entire width of canvas
            let y = map(waveform[i], -1, 1, height, 0);  // draws waveform equal to entire height of canvas
            vertex(x, y); // draws the waveform using x and y parameters from above ^^
        }
        endShape(); // drawing the waveform on canvas 
        let freq = map(mouseX, 0, width, 40, 880); // changing frequency as the user drags mouse side to side
        osc.freq(freq); // allows the previous changes
        let amp = map(mouseY, 0, height, 1, 0.01); // changing height of the wave as user goes up and down
        osc.amp(amp); // allows the previous changes
    }

    function playOscillator() { // starts playing the oscillator
        if (!playing) {
            osc.start(); 
            playing = true; // sets playing to true so we can hear it
        }
    }

    function stopOscillator() { // stops osc
        if (playing) { 
            osc.stop(); // turns off the osc
            playing = false; // sets playing to false so it shuts off the interaction
        }
    }
</script>

<!-- Second Canvas -->
<script>
    // Frequency Interaction
    var sketch = function(p) {  // "P" is used to allow p5.js to make two seperate canvases. used Coding Train's video on p5.js canvases to help me :)
        let osc2; // second osc
        let isOscillatorStarted = false;
        const minFrequency = 20;   // 20 - 20,000 range, numbers to show the change
        const maxFrequency = 20000;
        let instructionTextOpacity = 255; // instructions for interaction

        p.setup = function() {
            let canvas = p.createCanvas(720, 356); // canvas size
            canvas.parent('frequencyP5Container'); // parent so it can fit anywhere on the page
            osc2 = new p5.Oscillator(); // creating a separate oscillator 
            osc2.setType('sine');
            osc2.freq(0);
            osc2.amp(0.2); 

         };

        p.draw = function() {
            p.background(255);
            if (isOscillatorStarted) {
                let f = p.constrain(p.map(p.mouseX, 0, p.width, minFrequency, maxFrequency), minFrequency, maxFrequency); // can only go between the range of set parameters from above
                osc2.freq(f);
                p.textSize(24); // text size
                p.textAlign(p.CENTER, p.CENTER); // allignment
                p.text(Math.round(f) + "Hz", p.width/2, p.height/2);
            } else {  // instructions that show on the canvas before the user clicks the start buttons
                p.textSize(24);
                p.textAlign(p.CENTER, p.CENTER);
                p.fill(0, instructionTextOpacity);
                p.text("Click start, then slide your mouse to hear the frequency range!", p.width/2, p.height/2);  

            }
        };
        // start osc 2
        window.startPlayingOscillator = function() {
            if (!isOscillatorStarted) {
                osc2.start(); // begin osc
                isOscillatorStarted = true; // allow the oscillator to be played
                setVolume(0.1); // volume 
                // instructionTextOpacity = 0;
            }
        };
        // stop osc 2
        window.stopPlayingOscillator = function() {
            if (isOscillatorStarted) {
                osc2.stop(); // stop osc
                isOscillatorStarted = false; // shut down the osc
                
            }
        };
        //volume controls
        window.setVolume = function(vol) {
            osc2.amp(vol);  // allows me to control the volume of the osc, because it is louuuud
        };
    };

    var myp5 = new p5(sketch); // allows the second p5.js canvas to be shown on the html 
</script>

</body>
</html>
